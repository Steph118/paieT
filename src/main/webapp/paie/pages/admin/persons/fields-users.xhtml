<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="jakarta.faces.facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:h="jakarta.faces.html"
    xmlns:f="jakarta.faces.core">
    <div>
        <p:fieldset legend="#{msg['person.edit.user']}" class="mt-3" id="block-user">
            <div class="field sm:col-12 col-12 md:col-4 lg:col-4">
                <p:outputLabel for="addUser" value="#{msg['person.edit.addUser']}"/>
                <div>
                    <p:toggleSwitch id="addUser" value="#{personBean.addUser}"  
                                    onIcon="pi pi-check"
                                    offIcon="pi pi-times" >
                        <p:ajax update="block-user" listener="#{personBean.addUser()}"/>
                    </p:toggleSwitch>
                </div>

            </div>
            <ui:fragment rendered="#{personBean.addUser}">
                <div class="form-grid grid ui-fluid">
                    <div class="field sm:col-12 col-12 md:col-4 lg:col-4">
                        <p:outputLabel value="#{msg['users.edit.username']}" for="username"/>
                        <p:inputText id="username" class="w-full" placeholder="#{msg['users.edit.username.placeholder']}"
                                     required="true" requiredMessage="#{msg['users.edit.username.required']}"
                                     />
                    </div>
                    <div class="field sm:col-12 col-12 md:col-4 lg:col-4">
                        <p:outputLabel value="#{msg['users.edit.password']}" for="pswd"/>
                        <p:password id="pswd" class="w-full" placeholder="#{msg['users.edit.password.placeholder']}"
                                    required="true" requiredMessage="#{msg['users.edit.password.required']}"
                                    />
                    </div>

                    <div class="field sm:col-12 col-12 md:col-4 lg:col-4">
                        <p:outputLabel value="#{msg['users.edit.confirm.password']}" for="cfpswd"/>
                        <p:password id="cfpswd" class="w-full" placeholder="#{msg['users.edit.confirm.password.placeholder']}"
                                    required="true" requiredMessage="#{msg['users.edit.confirm.password.required']}"
                                    />
                    </div>
                    <div class="field w-full">
                        <p:outputLabel value="#{msg['roles.title']}" for="role"/>
                        <p:selectCheckboxMenu id="role" class="w-full" filter="true" filterMatchMode="startsWith"
                                              label="#{msg['choice-label']}" multiple="true" updateLabel="true" required="true" 
                                              requiredMessage="#{msg['roles.required']}" >
                            <f:selectItems value="#{personBean.listRoles()}" itemValue="#{s}" var="s" itemLabel="#{s.label}"/>
                        </p:selectCheckboxMenu>
                    </div>
                </div>
            </ui:fragment>
        </p:fieldset>
    </div>
</ui:composition>
